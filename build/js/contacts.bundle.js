!function(){"use strict";const e={email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},t=e=>{const t=e.parentNode.querySelectorAll(".error-message");t.length>0&&t.forEach((e=>e.remove()))},o=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("focus",(()=>{e.placeholder="+380"})),e.addEventListener("blur",(()=>{e.placeholder="Телефон"}))}))};function n(e,t){const o=document.createElement("span");o.classList.add("error-message"),o.textContent=t,e.appendChild(o)}const c=()=>document.documentElement.scrollHeight>window.innerHeight,l=(e,t,o,n)=>{const l=document.querySelector(e),r=document.querySelector(t);l.classList.add(o),r.classList.add(n),c()&&s()},r=(e,t,o,n)=>{const l=document.querySelector(e),r=document.querySelector(t);l.classList.remove(o),r.classList.remove(n),c()&&s()},s=()=>{document.body.style.overflow=""===document.body.style.overflow?"hidden":"";const e=a();document.documentElement.style.paddingRight="hidden"===document.body.style.overflow?e+"px":""},a=()=>{const e=document.createElement("div");e.style.overflow="scroll",e.style.visibility="hidden",document.body.append(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t};(({triggerButton:e,modalOverlay:t,modalBody:o,modalOverlayClass:n,modalClass:c,closeButton:s,closeOnOutside:a=!0,closeOnKey:d=!0,openOntimeDelay:i=1e4})=>{const m=document.querySelector(t),u=document.querySelectorAll(e),y=document.querySelectorAll(s);u.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),l(t,o,n,c)}))})),y.forEach((e=>{e.addEventListener("click",(()=>{r(t,o,n,c)}))})),a&&m.addEventListener("click",(e=>{e.target.classList.contains(n)&&r(t,o,n,c)})),d&&document.addEventListener("keydown",(e=>(e=>{"Escape"===e.code&&m.classList.contains(n)&&r(t,o,n,c)})(e))),i&&setTimeout((()=>{l(t,o,n,c)}),i)})({triggerButton:null,modalOverlay:"#contacts-modal",modalBody:".contacts-modal__content",modalOverlayClass:"showModal",modalClass:"showModal-scale",closeButton:"[data-modal-close]",closeOnOutside:!0,closeOnKey:!0,openOntimeDelay:!1}),o('.contacts-form__input[type="tel"]');const d=document.querySelector(".contacts-form__body");d.addEventListener("submit",(async c=>{c.preventDefault();const r=(({inputSelector:e,minLength:o,maxLength:c})=>{let l=!0;return document.querySelectorAll(e).forEach((e=>{const r=e.value.trim(),s=e.parentNode;t(e),r?r.length<o?(n(s,`Мінімум ${o} символів`),l=!1):r.length>c&&(n(s,`Максимум ${c} символів`),l=!1):(n(s,"Поле обов'язково!"),l=!1)})),l})({inputSelector:'.contacts-form__input[type="text"]',minLength:4,maxLength:30}),s=(o=>{let c=!0;return document.querySelectorAll('.contacts-form__input[type="email"]').forEach((o=>{const l=o.value.trim(),r=o.parentNode;t(o),l?/@/g.test(l)?e.email.test(l)||(n(r,"Введіть валідний email"),c=!1):(n(r,"email повинен мати @ символ"),c=!1):(n(r,"Поле обов'язково!"),c=!1)})),c})(),a=(e=>{let c=!0;const l=document.querySelectorAll(e);return l.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/\D/g,"")}))})),o(e),l.forEach((e=>{const o=e.value.trim(),l=e.parentNode;t(e),o?9!==o.length&&(n(l,"Телефон повинен мати 9 цифр"),c=!1):(n(l,"Поле обов'язково!"),c=!1)})),c})('.contacts-form__input[type="tel"]');if(!r||!s||!a)return;const i=(m=new FormData(d),Object.fromEntries(m.entries()));var m;try{if(!(await fetch("http://localhost:3000/userContacts",{method:"POST",body:JSON.stringify(i)})).ok)throw new Error("Feiled to fetch");d.reset(),l("#contacts-modal",".contacts-modal__content","showModal","showModal-scale")}catch(e){console.error("Error",e)}}))}();